<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
		<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
		<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>	
		<link rel="stylesheet" href="style.css">
	</head>
<body>
<!--Main page -->		
		
<div class="mdl-layout mdl-js-layout">
   <header class="mdl-layout__header">
      <div class="mdl-layout-icon"></div>
      <div class="mdl-layout__header-row">
         <span class="mdl-layout__title">Teach me</span>
         <span class="extraspace"> | </span>
         <span class="extraspace"> Home </span>
         <div class="mdl-layout-spacer"></div>
         <nav class="mdl-navigation">
			
			 <!-- Accent-colored raised button -->
			<span class="extraspace"> </span>
            <button id="logginButton" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
            Login
            <i class="button-righ-icon material-icons">account_circle</i>
            </button>
			<span class="extraspace"> </span> 
			 
            <!-- Accent-colored raised button -->
			 <span class="extraspace"> </span>
            	<a href="hp.html">
			 	<button id="profesorButton" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
				Hazte profesor!
            		<i class="button-righ-icon material-icons">account_circle</i>
            	</button>
				</a>	
			<span class="extraspace"> </span> 
			
			 <!-- Accent-colored raised button -->	
            <button id="logoutButton" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
            Sign out
            <i class="button-righ-icon material-icons">account_circle</i>
            </button>
         </nav>
		  
		  <span class="extraspace"> </span> 
			
			 <!-- Accent-colored raised button -->	
            <button id="registrateButton" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
            Regístrate
            <i class="button-righ-icon material-icons">account_circle</i>
            </button>
         </nav>
      </div>
   </header>
   <div class="mdl-layout__drawer">
   </div>
</div>
<div id="div1ClasesAlumno">
	<h6>Prueba 1</h6>
</div>
<div id="div2ClasesAlumno">
	<h6>Prueba 2</h6>
</div>
<div id="div3ClasesAlumno">
	<table class="mdl-data-table mdl-js-data-table">
  		<thead>
			<tr>
      			<th class="mdl-data-table__cell--non-numeric">Nombre</th>
      			<th class="mdl-data-table__cell--non-numeric">Teach</th>
      			<th class="mdl-data-table__cell--non-numeric">Language</th>
				<th class="mdl-data-table__cell--non-numeric">Video</th>
    		</tr>
  		</thead>
  		<tbody>
			<tr>
      			<td id=nameProf class="mdl-data-table__cell--non-numeric"></td>
      			<td id="teachProf" class="mdl-data-table__cell--non-numeric"></td>
      			<td id="langProf" class="mdl-data-table__cell--non-numeric"></td>
				<td  class="mdl-data-table__cell--non-numeric">
					<iframe width="560" height="315" src="" frameborder="0" id="someFrame" allowfullscreen></iframe>
				</td>
    		</tr>
  		</tbody>
	</table>
</div>
	
<div id="div4ClasesAlumno">
	<h6>Fecha</h6>
	<input type="text" id="fecha_id">
	<button id="contratarClase_" class="mdl-button mdl-js-button mdl-button--raised" onclick="contratarClase(document.getElementById('fecha_id').value)"><h8>Contratar</h8></button>	
</div>

</body>
	<script src="https://www.gstatic.com/firebasejs/4.1.3/firebase.js"></script>
	<script>
  	// Initialize Firebase
  		var config = {
    		apiKey: "AIzaSyCr2wfyL15rtEmQJsy-mGuc3URImSdNraQ",
    		authDomain: "teachme-7ed11.firebaseapp.com",
    		databaseURL: "https://teachme-7ed11.firebaseio.com",
    		projectId: "teachme-7ed11",
    		storageBucket: "teachme-7ed11.appspot.com",
    		messagingSenderId: "147010117223"
  		};
  		firebase.initializeApp(config);
	</script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script type='text/javascript' src="functions.js"></script>		
	<script>
		// Nos pasan el id en la url, parseamos y hacemos retrieve de esa info en fb
		var url = window.location.href;
		var search = url.split("?");
		var searchfb = search[1].slice(3);
		firebase.database().ref('/prof/' + searchfb).once('value').then(function(snapshot) {
  		var lang = snapshot.val().lang;
		var name = snapshot.val().name;
		var teach = snapshot.val().teach;
		var videourl = snapshot.val().videourl;
		console.log(videourl);	
		// Falta la foto	
			
		// Muy importante: He añadido un plugir para poder ver el video
		// Si en algún momento se sube a un servidor habrá que revisar este punto
				
		document.getElementById("nameProf").innerHTML = name;
		document.getElementById("langProf").innerHTML = lang;
		document.getElementById("teachProf").innerHTML = teach;
		document.getElementById("someFrame").src=videourl;			
		});
	</script>
	<script>
		function contratarClase(a){
			
			var url = window.location.href;
			var search = url.split("?");
			var searchfb = search[1].slice(3);
			contratarClasefunctions("09092017T100000",searchfb);
		}
	</script>	
</html>